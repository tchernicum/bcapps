<script src="jquery-1.8.0.min.js"></script>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg" 
 width="1024px" height="600px" viewbox="-512 -300 1024 600">
 <g id="g">
<text x="-24.8682069308733" y="0" fill="black" style="font-size:0.15">-2000</text>
<text x="-24.8169136364858" y="0" fill="black" style="font-size:0.15">-1900</text>
<text x="-24.7628464152155" y="0" fill="black" style="font-size:0.15">-1800</text>
<text x="-24.7056880013755" y="0" fill="black" style="font-size:0.15">-1700</text>
<text x="-24.6450633795591" y="0" fill="black" style="font-size:0.15">-1600</text>
<text x="-24.5805248584215" y="0" fill="black" style="font-size:0.15">-1500</text>
<text x="-24.5115319869346" y="0" fill="black" style="font-size:0.15">-1400</text>
<text x="-24.4374240147809" y="0" fill="black" style="font-size:0.15">-1300</text>
<text x="-24.3573813071073" y="0" fill="black" style="font-size:0.15">-1200</text>
<text x="-24.2703699301177" y="0" fill="black" style="font-size:0.15">-1100</text>
<text x="-24.1750597503134" y="0" fill="black" style="font-size:0.15">-1000</text>
<text x="-24.0696992346555" y="0" fill="black" style="font-size:0.15">-900</text>
<text x="-23.9519161989992" y="0" fill="black" style="font-size:0.15">-800</text>
<text x="-23.8183848063746" y="0" fill="black" style="font-size:0.15">-700</text>
<text x="-23.6642341265474" y="0" fill="black" style="font-size:0.15">-600</text>
<text x="-23.4819125697534" y="0" fill="black" style="font-size:0.15">-500</text>
<text x="-23.2587690184392" y="0" fill="black" style="font-size:0.15">-400</text>
<text x="-22.9710869459874" y="0" fill="black" style="font-size:0.15">-300</text>
<text x="-22.5656218378793" y="0" fill="black" style="font-size:0.15">-200</text>
<text x="-21.8724746573193" y="0" fill="black" style="font-size:0.15">-100</text>
<text x="0" y="0" fill="black" style="font-size:0.15">0</text>
<text x="21.8724746573193" y="0" fill="black" style="font-size:0.15">100</text>
<text x="22.5656218378793" y="0" fill="black" style="font-size:0.15">200</text>
<text x="22.9710869459874" y="0" fill="black" style="font-size:0.15">300</text>
<text x="23.2587690184392" y="0" fill="black" style="font-size:0.15">400</text>
<text x="23.4819125697534" y="0" fill="black" style="font-size:0.15">500</text>
<text x="23.6642341265474" y="0" fill="black" style="font-size:0.15">600</text>
<text x="23.8183848063746" y="0" fill="black" style="font-size:0.15">700</text>
<text x="23.9519161989992" y="0" fill="black" style="font-size:0.15">800</text>
<text x="24.0696992346555" y="0" fill="black" style="font-size:0.15">900</text>
<text x="24.1750597503134" y="0" fill="black" style="font-size:0.15">1000</text>
<text x="24.2703699301177" y="0" fill="black" style="font-size:0.15">1100</text>
<text x="24.3573813071073" y="0" fill="black" style="font-size:0.15">1200</text>
<text x="24.4374240147809" y="0" fill="black" style="font-size:0.15">1300</text>
<text x="24.5115319869346" y="0" fill="black" style="font-size:0.15">1400</text>
<text x="24.5805248584215" y="0" fill="black" style="font-size:0.15">1500</text>
<text x="24.6450633795591" y="0" fill="black" style="font-size:0.15">1600</text>
<text x="24.7056880013755" y="0" fill="black" style="font-size:0.15">1700</text>
<text x="24.7628464152155" y="0" fill="black" style="font-size:0.15">1800</text>
<text x="24.8169136364858" y="0" fill="black" style="font-size:0.15">1900</text>
<text x="24.8682069308733" y="0" fill="black" style="font-size:0.15">2000</text>
</g></svg>


<script language="javascript">

// the SVG file and its graphics content
svg = document.getElementById("svg");
g = document.getElementById("g");

// the initial values
var is_zooming = 0;
var is_moving = 0;
var mouse_down = 0;
// the initial view is [-512,+512]
// large values of zoom = zooming in
var zoom = 1;
var xcenter = 0;
var zoomfactor = 1.01;
var mousex;

// bindings (should these be on the SVG instead of the document?)
$(document).mousedown(
		      function(e) {
			mouse_down = 1;
			if (e.shiftKey) {shiftmousedown(e);}
			else if (e.ctrlKey) {ctrlmousedown(e);}
			else {mousedown(e);}
		      })
$(document).mouseup(mouseup)
$(document).mousemove(
		      function(e) {
			if (mouse_down) {
			  mousemove(e);
			    }
		      }
		      );

// recenter/scale the document when any change is made
// (doesn't actually redraw, the SVG handles that)
function redraw() {
  //  var str = "translate(" + -xcenter + ",0) scale(" + zoom +",1)";
  var str = "translate(" + -xcenter*zoom + ",0) scale(" + zoom +",1)";
  // WRONG: var str = "scale(" + zoom +",1) translate("+ -xcenter*zoom + ",0)";
  g.setAttribute("transform",str);
}

function mousemove(e) {
  xcenter = oldcenter - (e.pageX-oldmouse)/zoom;
  redraw();
}

function shiftmousedown() {
 is_zooming = 1;
 holdzoom(zoomfactor);
}

// when mouse button pressed...
function mousedown(e) {
 is_moving = 1;

 // record the current xcenter and mouse position for mousemove()
 oldcenter = xcenter;
 // <h>this old mouse...</h>
 oldmouse = e.pageX;
}

function ctrlmousedown(e) {
 is_zooming = 1;
 holdzoom(1./zoomfactor);
}

function mouseup(e) {
  is_zooming = 0;
  is_moving = 0;
  mouse_down = 0;
  redraw();
  //  alert("Z:"+zoom+", XC:"+xcenter);
}

// keep zooming by zf
function holdzoom(zf) {
  if (is_zooming) {
    zoom=zoom*zf;
    redraw();
    setTimeout("holdzoom("+zf+")", 1);
  }
}

</script>
